<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ns.sql.OpeningMapper">
	<insert id="addOpening" parameterType="Opening">
		INSERT
		INTO Opening
		(u_email, o_createdAt, o_careway, o_sdate, o_edate, o_location, o_price, o_per, o_prefer, o_detail, o_close)
		VALUES
		(#{uEmail}, #{createdAt}, #{careWay}, #{sDate}, #{eDate}, #{location}, #{price}, #{per}, #{prefer}, #{detail}, 0)
	</insert>

	<insert id="addPostPet" parameterType="map">
		INSERT INTO PostPet (o_no, p_no)
		VALUES (#{oNo}, #{pNo})
	</insert>

	<update id="updateOpening" parameterType="Opening">
		UPDATE Opening SET
		o_careway = #{careway}, o_sdate = #{sdate}, o_edate = #{edate}, o_location = #{location},
		o_price = #{price}, o_per = #{per}, o_prefer = #{prefer}, o_detail = #{detail}, o_close = #{close}
		WHERE o_no = #{no}
	</update>

	<delete id="deleteOpening" parameterType="Integer">
		DELETE FROM Opening
		WHERE no = #{VALUE}
	</delete>

	<select id="getUserOpening" parameterType="String" resultType="Opening">
		SELECT *
		FROM Opening o JOIN PostPet pp
		WHERE o.o_no = pp.o_no
		AND o.u_email = #{VALUE}
	</select>

</mapper>

 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 